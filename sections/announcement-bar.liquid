
{%- for block in section.blocks -%}
  {%- case block.type -%}
    {%- when 'announcement' -%}
      <div class=" {% if block.settings.text == blank %} hidden {% endif %} background-primary container__large container-pc-low announcement">
        <div class="header-above__contain wide-header-above grid">
          <span></span>
          <div class="heading-header text-color">
            {{ block.settings.text }}
          </div>
          <div class="announcement__form df">
            {% form 'localization' %}
            <div class="localization__price">
              <select name="country_code" class="price-select background-primary text-color" >
                {%- for country in localization.available_countries -%}
                  <option value="{{ country.iso_code }}" {%- if country.iso_code == localization.country.iso_code %} selected{% endif %}>
                    {{ country.name }} ({{ country.currency.iso_code }} {{ country.currency.symbol }})
                  </option>
                {%- endfor -%}
              </select>
              <input hidden type="submit" value="Update" class="price__input">
            </div>
            {% endform %}
  
            {% form 'localization' %}
            <div class="language df">
              <select name="language_code" class="laguage-select text-color background-primary">
                {% for language in localization.available_languages %}
                  <option value="{{ language.iso_code }}"
                    {%- if language == localization.language %} selected="selected"{% endif %}>
                    {{ language.endonym_name }}             
                  </option>
                {% endfor %}
              </select>         
              <input hidden type="submit" value="Update" class="language__input background-primary text-color localization__input">
            </div>
            {% endform %}
          </div>
        </div>
      </div>
  {% endcase %}
{% endfor %}

<script>
  let optionsLanguage = document.querySelector('.laguage-select');
  let inputLanguage = document.querySelector('.language__input');
  
  optionsLanguage.onchange = function() {
    inputLanguage.click();
  }

  let optionsLPrice = document.querySelector('.price-select');
  let inputPrice = document.querySelector('.price__input');
  
  optionsLPrice.onchange = function() {
    inputPrice.click();
  }

  let announcement = document.querySelector('.announcement__form ')
  let announcementSpan = document.querySelector('.header-above__contain span')
  announcementSpan.style.width = ` ${announcement.offsetWidth}px `
</script>

    

{% schema %}
{
  "name": "Top bar",
  "settings": [
    {
      "type": "select",
      "id": "vertical_alignment",
      "label": "Color scheme",
      "options": [
        {
          "value": "Accent 1",
          "label": "Accent 1"
        },
        {
          "value": "Accent 2",
          "label": "Accent 2"
        },
        {
          "value": "Accent 3",
          "label": "Accent 3"
        }
      ],
      "default": "Accent 1"
    },
    { 
      "type":"header",
      "content": "Messages"
    },
    {
      "type": "checkbox",
      "label": "Enable messages autoplay",
      "id": "Enabel_autoplay"
    },
    {
      "type": "range",
      "id": "item_per_row",
      "min": 3,
      "max": 10,
      "step": 1,
      "label": "Change message every",
      "default": 5,
      "unit": "s"
    },
    { 
      "type":"header",
      "content": "Currency selector",
      "info": "To add a currency, go to your [payment settings](https://accounts.shopify.com/select?rid=c08d3742-4fa9-4af3-8360-7c926dcc3806)"
    },
    {
      "type": "link_list",
      "id": "menu",
      "label": "Select menu"
    },
    {
      "type": "checkbox",
      "label": "Show currency selector",
      "id": "show_currency_selector",
      "info": "Currency selector displays inside drawer on mobile"
    },
    { 
      "type":"header",
      "content": "Language selector",
      "info": "To add a language, go to your [language settings](https://gia-dinh-g-u.myshopify.com/admin/settings/languages)"
    },
    {
      "type": "checkbox",
      "label": "Show language selector",
      "id": "show_language_selector",
      "info": "Language selector displays inside drawer on mobile"
    }
    

  ],
  "blocks": [
  {
    "type": "announcement",
    "name": "Announcement ",
    "settings": [
      {
        "type": "text",
        "id": "text",
        "default": "Welcome to our store",
        "label": "Text"
      }
    ]
  }
  ]
}
    

{% endschema %}

